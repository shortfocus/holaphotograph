name = "holaphotograph-api"
main = "src/index.ts"
compatibility_date = "2025-02-17"

# D1 데이터베이스 (wrangler d1 create holaphotograph-db 실행 후 database_id 교체)
[[d1_databases]]
binding = "DB"
database_name = "holaphotograph-db"
database_id = "97b99cdf-1193-4f3f-b67d-214bc89aa446"


# R2 버킷 (이미지 업로드) — 기존 버킷 그대로 사용
[[r2_buckets]]
binding = "BUCKET"
bucket_name = "camera-review-images"

# Rate limiting (고객 후기 제출/이미지 업로드). 상세: docs/KV_SETUP.md
# 프로덕션: npx wrangler kv namespace create "RATE_LIMIT"  → 나온 id로 아래 id 교체
# 프리뷰(로컬): npx wrangler kv namespace create "RATE_LIMIT" --preview  → 나온 id로 preview_id 교체
[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "bb94378fd15d4ccb85444f63c41f7fa0"
preview_id = "f7f176a5728142329e3e568d2b0a1fde"

# 허용 관리자 이메일. Worker를 Access로 보호하면 헤더로 전달됨.
# Worker Access 제거 시 아래도 비워두면 쓰기 허용 (/admin만 Access로 보호)
# [vars]
# ALLOWED_EMAILS = "chs4413@gmail.com, test@test.com"

# 유튜브 최신 영상 조회용. 설정: wrangler secret put YOUTUBE_API_KEY
# [Google Cloud Console] → API 및 서비스 → 사용자 인증 정보 → API 키 생성
# YouTube Data API v3 활성화 필요

# 네이버 블로그 총 방문자 수 (수동 업데이트)
[vars]
NAVER_BLOG_VISITORS = "657550"
