# 유튜브 API 할당량 초과 이슈 보고서

**작성일**: 2025년 2월  
**대상**: 비개발자 이해용 요약

---

## 1. 무슨 일이 있었나요?

사이트 메인 페이지에서 **유튜브 영상 섹션**이 잠시 **“영상을 불러올 수 없습니다”** 같은 메시지로만 보이거나, 아예 로딩이 안 되는 현상이 있었습니다.  
동시에 **네이버 블로그(장비 비교·상세 분석)** 영역도 **“블로그를 불러올 수 없습니다”**로만 보이는 경우가 있었습니다.

---

## 2. 원인: “하루 사용 한도”를 넘어감

- 우리 사이트는 **유튜브 채널의 최신 영상 목록**을 보여주기 위해 **Google(구글)이 제공하는 “유튜브 데이터 API”**를 사용합니다.
- 이 API에는 **“하루에 최대 몇 번까지 요청할 수 있는지”**에 대한 **일일 할당량(한도)** 이 있습니다.  
  (예: 하루 10,000번까지 등)
- 그날 **사이트 방문·새로고침 등으로 API가 10,000번을 넘게 호출**되면서 **할당량이 초과**되었고,  
  그 결과 Google 측에서 **“더 이상 요청을 받을 수 없다”**는 의미로 **403 오류**를 반환했습니다.
- 그래서 **유튜브 영상 목록을 가져오지 못해** 메인 페이지의 유튜브 섹션이 제대로 안 보였습니다.

**정리**:  
유튜브 영상 목록을 가져오는 **외부 서비스(Google API)의 “하루 사용 한도”**를 넘어서서, 그날은 유튜브 섹션이 정상적으로 표시되지 않은 상황입니다.

---

## 3. 블로그는 왜 같이 안 보였나요?

- 메인 페이지는 **유튜브 API**, **네이버 블로그(RSS)**, **채널 통계**를 **한 번에** 불러온 뒤 화면을 그립니다.
- 이때 **유튜브 API만 실패(403)** 해도, **“하나라도 실패하면 전체를 실패로 처리”**하는 방식이었기 때문에,  
  **네이버 블로그 데이터는 정상인데도** “블로그를 불러올 수 없습니다”로 표시되었습니다.

**정리**:  
유튜브만 한도 초과로 실패했는데, 그 실패 때문에 **블로그까지 실패한 것처럼 보이게** 되어 있었습니다.

---

## 4. 우리가 한 조치 (재발 방지)

### 4-1. 유튜브 API 호출 줄이기 (캐시 적용)

- **캐시** = “한 번 받아온 결과를 일정 시간 동안 다시 쓰는 것”이라고 보시면 됩니다.
- 이제 **유튜브 최신 영상 목록**을 **10분 동안은 저장해 두고**,  
  그 10분 안에 들어오는 방문자는 **같은 목록을 다시 사용**합니다.
- 그래서 **10분에 한 번만** Google API를 호출하게 되어, **하루 총 호출 횟수가 크게 줄어듭니다.**

**비유**:  
매번 창문 열어서 바깥 날씨를 보는 대신, **10분마다 한 번만 확인한 결과를 메모해 두고**, 그 10분 동안은 그 메모를 보여주는 것과 비슷합니다.

### 4-2. 유튜브 실패해도 블로그는 보이게

- **유튜브 API**와 **네이버 블로그**를 **각각 따로** 실패/성공을 처리하도록 수정했습니다.
- 이제 **유튜브만 한도 초과(403)** 이 나도 **네이버 블로그 영역은 그대로** 불러와서 표시됩니다.
- 반대로 블로그 쪽에 문제가 있어도, 유튜브 영역은 정상적으로 보이도록 했습니다.

**정리**:  
한쪽이 실패해도 **다른 쪽은 그대로 보이도록** 나눠서 처리했습니다.

---

## 5. 앞으로 할당량이 또 넘으면 어떻게 되나요?

- **그날 자정(미국 태평양 시간 기준)** 이 지나면 **일일 할당량이 다시 리셋**됩니다.  
  그 다음날부터는 다시 정상적으로 유튜브 영상이 표시됩니다.
- **캐시(10분)** 덕분에 같은 기간에 여러 번 들어와도 API 호출 횟수가 줄어들어, **할당량 초과 가능성은 이전보다 낮아졌습니다.**
- 필요하다면 Google Cloud 콘솔에서 **“할당량 증액 요청”**을 해서 하루 한도를 늘리는 것도 가능합니다. (별도 검토·승인 과정이 있을 수 있습니다.)

---

## 6. 요약 (한 줄로)

| 항목 | 설명 |
|------|------|
| **무슨 일** | 유튜브 영상 목록을 가져오는 Google API의 “하루 사용 한도”를 초과해서, 유튜브 섹션·일부 블로그 영역이 잠시 안 보임 |
| **원인** | API 일일 할당량 초과(예: 10,004 / 10,000) |
| **조치** | ① 유튜브 결과 10분 캐시로 API 호출 감소 ② 유튜브 실패 시에도 블로그는 따로 표시되도록 수정 |
| **재발 시** | 당일은 자정(PT) 이후 리셋될 때까지 유튜브만 제한될 수 있음. 블로그는 정상 표시됨. |

---

*문의나 추가 설명이 필요하면 개발 담당자에게 요청하시면 됩니다.*
