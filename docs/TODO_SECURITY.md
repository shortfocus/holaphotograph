# 보안·기능 추후 적용 예정

현재 적용된 대비(Rate limit, XSS, 입력 검증 등) 외에, **추후 필요 시** 검토·적용할 항목을 정리한 문서입니다.

---

## 1. 캡챠 (CAPTCHA / Turnstile)

**상황**: 고객 후기 제출은 현재 rate limit(3회/분, 5회/분)만으로 제한 중.

**추가 검토 시점**
- IP 로테이션 봇으로 스팸이 늘어날 때
- “사람 vs 봇” 한 번 더 걸러두고 싶을 때

**후보**
- **Cloudflare Turnstile**: 무료, 프라이버시 친화적. 과거 프로젝트에서 사용 후 제거한 이력 있음 → 재연동 가능.

**참고**: 도입 시 사용자에게 클릭/도전 한 번 추가되므로, 실제 스팸이 문제될 때 도입하는 것을 권장.

---

## 2. 이미지 업로드 매직 바이트 검사 ✅ 적용됨

**상황**: 업로드 시 `Content-Type`(헤더) + **파일 앞 12바이트(매직 바이트)** 검사 적용.

**적용 내용** (`worker/src/index.ts` - `isAllowedImageMagicBytes`)
- JPEG: `FF D8 FF`
- PNG: `89 50 4E 47 0D 0A 1A 0A`
- GIF: `GIF87a` / `GIF89a`
- WebP: `RIFF....WEBP`
- 위에 해당하지 않으면 400 반환. 확장자/Content-Type 조작해도 실제 바이너리로만 판단.

---

## 3. 관리자 API Rate limit

**상황**: 고객 후기·이미지 업로드에만 rate limit 적용. 관리자용 API(POST/PUT/DELETE 등)는 미적용.

**추가 시**
- 관리자 API에도 IP·계정별 제한을 두어 남용·자동화 공격 완화.
- Cloudflare Access 등으로 이미 보호된 경우 우선순위는 낮을 수 있음.

---

## 4. 기타

- **CORS**: 현재 특정 도메인 + 그 외 `*`. 스팸이 심해지면 허용 도메인만 명시적으로 제한 검토.
- **로그·모니터링**: 429 발생, 비정상 트래픽 패턴 등 알림/대시보드 있으면 추후 대응에 유리.

---

*최종 수정: 2026-02*
